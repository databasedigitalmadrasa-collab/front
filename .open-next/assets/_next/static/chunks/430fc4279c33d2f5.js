(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23619,e=>{"use strict";var s=e.i(794313),t=e.i(368340),a=e.i(167881),l=e.i(23750),i=e.i(994179),n=e.i(625959),r=e.i(630374),c=e.i(10708),d=e.i(62870),o=e.i(947627),h=e.i(330009),x=e.i(463415),u=e.i(705576),m=e.i(813637),p=e.i(352910),g=e.i(417508),j=e.i(468793),b=e.i(322253),v=e.i(411741),_=e.i(544929),N=e.i(874679);let S=(0,e.i(510965).default)("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var y=e.i(229439),C=e.i(290768),f=e.i(120682),w=e.i(44215),T=e.i(538036);function D(){let{toast:e}=(0,f.useToast)(),[D,I]=(0,t.useState)([]),[L,A]=(0,t.useState)([]),[F,k]=(0,t.useState)([]),[V,P]=(0,t.useState)(!0),[M,B]=(0,t.useState)([]),[R,H]=(0,t.useState)(""),[E,U]=(0,t.useState)("all"),[O,z]=(0,t.useState)("all"),[K,$]=(0,t.useState)("all"),[q,G]=(0,t.useState)(""),[J,Q]=(0,t.useState)(""),[W,X]=(0,t.useState)(1),[Y,Z]=(0,t.useState)(!1),[ee,es]=(0,t.useState)(!1),[et,ea]=(0,t.useState)(!1),[el,ei]=(0,t.useState)(!1),[en,er]=(0,t.useState)(null),[ec,ed]=(0,t.useState)({}),[eo,eh]=(0,t.useState)(!1);(0,t.useEffect)(()=>{ex(),eu(),em()},[]);let ex=async()=>{P(!0);let s=(0,T.getAuthToken)(),t=await w.apiClient.get("/subscriptions",s);console.log("Subscriptions API response:",t),t.success&&t.data?.items?(I(t.data.items),console.log("Subscriptions loaded:",t.data.items.length)):(console.log("Failed to load subscriptions:",t),e({title:"Error",description:t.message||"Failed to fetch subscriptions",variant:"destructive"})),P(!1)},eu=async()=>{let e=(0,T.getAuthToken)(),s=await w.apiClient.get("/users",e);s.success&&s.data&&A(s.data.items||[])},em=async()=>{let e=(0,T.getAuthToken)(),s=await w.apiClient.get("/subscription-plans",e);s.success&&s.data&&k(s.data.items||[])},ep=async()=>{if(!ec.user_id||!ec.plan_id)return void e({title:"Validation Error",description:"Please select user and plan",variant:"destructive"});eh(!0);let s=(0,T.getAuthToken)(),t={user_id:ec.user_id,plan_id:ec.plan_id,start_date:ec.start_date||null,renewal_date:ec.renewal_date||null,subscription_type:ec.subscription_type||null,subscription_amount_paid:void 0!==ec.subscription_amount_paid?Number(ec.subscription_amount_paid):null,subscription_status:ec.subscription_status||"active",order_id:ec.order_id||null,merchant_id:ec.merchant_id||null,transaction_status:ec.transaction_status||null,transaction_timestamp:ec.transaction_timestamp||null},a=await w.apiClient.post("/subscriptions",t,s);a.success?(e({title:"Success",description:"Subscription created successfully"}),ea(!1),ed({}),ex()):e({title:"Error",description:a.message||"Failed to create subscription",variant:"destructive"}),eh(!1)},eg=async()=>{if(!en)return;eh(!0);let s=(0,T.getAuthToken)(),t={user_id:ec.user_id,plan_id:ec.plan_id,start_date:ec.start_date||null,renewal_date:ec.renewal_date||null,subscription_type:ec.subscription_type||null,subscription_amount_paid:void 0!==ec.subscription_amount_paid?Number(ec.subscription_amount_paid):null,subscription_status:ec.subscription_status||"active",order_id:ec.order_id||null,merchant_id:ec.merchant_id||null,transaction_status:ec.transaction_status||null,transaction_timestamp:ec.transaction_timestamp||null},a=await w.apiClient.put(`/subscriptions/${en.id}`,t,s);a.success?(e({title:"Success",description:"Subscription updated successfully"}),es(!1),ed({}),er(null),ex()):e({title:"Error",description:a.message||"Failed to update subscription",variant:"destructive"}),eh(!1)},ej=async()=>{if(!en)return;eh(!0);let s=(0,T.getAuthToken)(),t=await w.apiClient.delete(`/subscriptions/${en.id}`,s);t.success?(e({title:"Success",description:"Subscription deleted successfully"}),ei(!1),er(null),ex()):e({title:"Error",description:t.message||"Failed to delete subscription",variant:"destructive"}),eh(!1)},eb=D.filter(e=>{let s=e.user?.full_name?.toLowerCase().includes(R.toLowerCase())||e.user?.email?.toLowerCase().includes(R.toLowerCase())||e.order_id?.toLowerCase().includes(R.toLowerCase()),t="all"===E||e.subscription_status===E,a="all"===O||e.subscription_type===O,l="all"===K||e.transaction_status===K,i=!0;if(q&&J){let s=new Date(e.start_date);i=s>=new Date(q)&&s<=new Date(J)}return s&&t&&a&&l&&i}),ev=Math.ceil(eb.length/10),e_=eb.slice((W-1)*10,10*W),eN=e=>"₹"+(e/100).toFixed(2),eS=e=>e?new Date(e).toLocaleDateString("en-IN"):"N/A",ey=e=>(0,s.jsx)(i.Badge,{className:{active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-700",past_due:"bg-orange-100 text-orange-700",cancelled:"bg-red-100 text-red-700"}[e]||"bg-gray-100 text-gray-700",children:e.replace("_"," ").charAt(0).toUpperCase()+e.slice(1)}),eC=e=>(0,s.jsx)(i.Badge,{className:{success:"bg-green-100 text-green-700",failed:"bg-red-100 text-red-700",pending:"bg-yellow-100 text-yellow-700"}[e]||"bg-gray-100 text-gray-700",children:e.charAt(0).toUpperCase()+e.slice(1)}),ef=D.filter(e=>"active"===e.subscription_status).length,ew=D.filter(e=>"success"===e.transaction_status).reduce((e,s)=>e+s.subscription_amount_paid,0),eT=D.filter(e=>"past_due"===e.subscription_status).length;return V?(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(C.Loader2,{className:"w-8 h-8 animate-spin mx-auto text-[#0066ff] mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading subscriptions..."})]})}):(0,s.jsx)("div",{className:"flex-1 overflow-auto bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-full mx-auto p-4 lg:p-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-[#0066ff] to-[#0052cc] rounded-2xl p-8 mb-6 text-white shadow-lg",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold font-heading",children:"Subscriptions"}),(0,s.jsx)("p",{className:"text-white/80 text-sm mt-1",children:"Manage user subscriptions and recurring payments"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(a.Button,{variant:"secondary",className:"gap-2 bg-white text-[#0066ff] hover:bg-white/90",onClick:()=>{let s=new Blob([[["ID","User Name","Email","Plan","Type","Status","Start Date","Renewal Date","Amount (₹)","Order ID","Txn Status"],...eb.map(e=>[e.id,e.user?.full_name||"",e.user?.email||"",e.plan?.title||"",e.subscription_type,e.subscription_status,eS(e.start_date),eS(e.renewal_date),(e.subscription_amount_paid/100).toFixed(2),e.order_id,e.transaction_status])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="subscriptions.csv",a.click(),window.URL.revokeObjectURL(t),e({title:"Exported",description:"Subscriptions exported as CSV"})},children:[(0,s.jsx)(m.Download,{className:"w-4 h-4"}),"Export CSV"]}),(0,s.jsxs)(a.Button,{variant:"secondary",className:"gap-2 bg-white text-[#0066ff] hover:bg-white/90",onClick:()=>{ed({subscription_status:"active",transaction_status:"success"}),ea(!0)},children:[(0,s.jsx)(y.Plus,{className:"w-4 h-4"}),"Create Subscription"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 pt-6 border-t border-white/20",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:D.length}),(0,s.jsx)("div",{className:"text-sm text-white/80",children:"Total Subscriptions"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:ef}),(0,s.jsx)("div",{className:"text-sm text-white/80",children:"Active"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:eT}),(0,s.jsx)("div",{className:"text-sm text-white/80",children:"Past Due"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:eN(ew)}),(0,s.jsx)("div",{className:"text-sm text-white/80",children:"Total Revenue"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm mb-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 relative",children:[(0,s.jsx)(u.Search,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),(0,s.jsx)(l.Input,{placeholder:"Search by name, email, order ID...",className:"pl-10 h-11",value:R,onChange:e=>H(e.target.value)})]}),(0,s.jsxs)(d.Select,{value:E,onValueChange:U,children:[(0,s.jsx)(d.SelectTrigger,{className:"h-11",children:(0,s.jsx)(d.SelectValue,{placeholder:"Filter by status"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"all",children:"All Status"}),(0,s.jsx)(d.SelectItem,{value:"active",children:"Active"}),(0,s.jsx)(d.SelectItem,{value:"inactive",children:"Inactive"}),(0,s.jsx)(d.SelectItem,{value:"past_due",children:"Past Due"}),(0,s.jsx)(d.SelectItem,{value:"cancelled",children:"Cancelled"})]})]}),(0,s.jsxs)(d.Select,{value:O,onValueChange:z,children:[(0,s.jsx)(d.SelectTrigger,{className:"h-11",children:(0,s.jsx)(d.SelectValue,{placeholder:"Filter by type"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"all",children:"All Types"}),(0,s.jsx)(d.SelectItem,{value:"monthly",children:"Monthly"}),(0,s.jsx)(d.SelectItem,{value:"annual",children:"Annual"})]})]}),(0,s.jsxs)(d.Select,{value:K,onValueChange:$,children:[(0,s.jsx)(d.SelectTrigger,{className:"h-11",children:(0,s.jsx)(d.SelectValue,{placeholder:"Txn status"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"all",children:"All Txn Status"}),(0,s.jsx)(d.SelectItem,{value:"success",children:"Success"}),(0,s.jsx)(d.SelectItem,{value:"failed",children:"Failed"}),(0,s.jsx)(d.SelectItem,{value:"pending",children:"Pending"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(l.Input,{type:"date",placeholder:"Start date",className:"h-11",value:q,onChange:e=>G(e.target.value)}),(0,s.jsx)(l.Input,{type:"date",placeholder:"End date",className:"h-11",value:J,onChange:e=>Q(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(o.Table,{children:[(0,s.jsx)(o.TableHeader,{children:(0,s.jsxs)(o.TableRow,{className:"bg-gray-50",children:[(0,s.jsx)(o.TableHead,{className:"w-12",children:(0,s.jsx)(n.Checkbox,{checked:M.length===e_.length&&e_.length>0,onCheckedChange:e=>{e?B(e_.map(e=>e.id)):B([])}})}),(0,s.jsx)(o.TableHead,{className:"font-semibold",children:"ID"}),(0,s.jsx)(o.TableHead,{className:"font-semibold",children:"User"}),(0,s.jsx)(o.TableHead,{className:"font-semibold",children:"Plan"}),(0,s.jsx)(o.TableHead,{className:"font-semibold",children:"Type"}),(0,s.jsx)(o.TableHead,{className:"font-semibold",children:"Status"}),(0,s.jsx)(o.TableHead,{className:"font-semibold",children:"Start Date"}),(0,s.jsx)(o.TableHead,{className:"font-semibold",children:"Renewal Date"}),(0,s.jsx)(o.TableHead,{className:"font-semibold",children:"Amount"}),(0,s.jsx)(o.TableHead,{className:"font-semibold",children:"Order ID"}),(0,s.jsx)(o.TableHead,{className:"font-semibold",children:"Txn Status"}),(0,s.jsx)(o.TableHead,{className:"text-right font-semibold",children:"Actions"})]})}),(0,s.jsx)(o.TableBody,{children:0===e_.length?(0,s.jsx)(o.TableRow,{children:(0,s.jsx)(o.TableCell,{colSpan:12,className:"text-center py-8 text-gray-500",children:"No subscriptions found matching your filters"})}):e_.map(e=>(0,s.jsxs)(o.TableRow,{className:"hover:bg-gray-50",children:[(0,s.jsx)(o.TableCell,{children:(0,s.jsx)(n.Checkbox,{checked:M.includes(e.id),onCheckedChange:s=>{var t;return t=e.id,void(s?B([...M,t]):B(M.filter(e=>e!==t)))}})}),(0,s.jsx)(o.TableCell,{children:(0,s.jsxs)("span",{className:"font-medium text-gray-900",children:["#",e.id]})}),(0,s.jsx)(o.TableCell,{children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.user?.full_name||"N/A"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.user?.email||"N/A"})]})}),(0,s.jsx)(o.TableCell,{children:(0,s.jsx)("span",{className:"text-sm text-gray-700",children:e.plan?.title||"N/A"})}),(0,s.jsx)(o.TableCell,{children:(0,s.jsx)(i.Badge,{className:"bg-blue-100 text-blue-700",children:e.subscription_type||"N/A"})}),(0,s.jsx)(o.TableCell,{children:ey(e.subscription_status)}),(0,s.jsx)(o.TableCell,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,s.jsx)(N.Calendar,{className:"w-4 h-4 text-gray-400"}),eS(e.start_date)]})}),(0,s.jsx)(o.TableCell,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,s.jsx)(S,{className:"w-4 h-4 text-gray-400"}),eS(e.renewal_date)]})}),(0,s.jsx)(o.TableCell,{children:(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:eN(e.subscription_amount_paid)})}),(0,s.jsx)(o.TableCell,{children:(0,s.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:e.order_id})}),(0,s.jsx)(o.TableCell,{children:eC(e.transaction_status)}),(0,s.jsx)(o.TableCell,{className:"text-right",children:(0,s.jsxs)(x.DropdownMenu,{children:[(0,s.jsx)(x.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(a.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(_.MoreHorizontal,{className:"w-4 h-4"})})}),(0,s.jsxs)(x.DropdownMenuContent,{align:"end",children:[(0,s.jsxs)(x.DropdownMenuItem,{onClick:()=>{er(e),Z(!0)},children:[(0,s.jsx)(j.Eye,{className:"w-4 h-4 mr-2"}),"View Details"]}),(0,s.jsxs)(x.DropdownMenuItem,{onClick:()=>{er(e),ed(e),es(!0)},children:[(0,s.jsx)(b.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,s.jsx)(x.DropdownMenuSeparator,{}),(0,s.jsxs)(x.DropdownMenuItem,{onClick:()=>{er(e),ei(!0)},className:"text-red-600",children:[(0,s.jsx)(v.Trash2,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},e.id))})]})}),ev>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(W-1)*10+1," to"," ",Math.min(10*W,eb.length)," of ",eb.length," ","results"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.Button,{variant:"outline",size:"sm",onClick:()=>X(W-1),disabled:1===W,children:(0,s.jsx)(p.ChevronLeft,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:ev},(e,s)=>s+1).map(e=>(0,s.jsx)(a.Button,{variant:e===W?"default":"outline",size:"sm",onClick:()=>X(e),className:e===W?"bg-[#0066ff]":"",children:e},e))}),(0,s.jsx)(a.Button,{variant:"outline",size:"sm",onClick:()=>X(W+1),disabled:W===ev,children:(0,s.jsx)(g.ChevronRight,{className:"w-4 h-4"})})]})]})]}),(0,s.jsx)(r.Dialog,{open:et,onOpenChange:ea,children:(0,s.jsxs)(r.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(r.DialogHeader,{children:(0,s.jsx)(r.DialogTitle,{children:"Create New Subscription"})}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"user",children:"User *"}),(0,s.jsxs)(d.Select,{value:ec.user_id?.toString(),onValueChange:e=>ed({...ec,user_id:Number(e)}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"Select user"})}),(0,s.jsx)(d.SelectContent,{children:L.map(e=>(0,s.jsxs)(d.SelectItem,{value:e.id.toString(),children:[e.name," (",e.email,")"]},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"plan",children:"Plan *"}),(0,s.jsxs)(d.Select,{value:ec.plan_id?.toString(),onValueChange:e=>ed({...ec,plan_id:Number(e)}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"Select plan"})}),(0,s.jsx)(d.SelectContent,{children:F.map(e=>(0,s.jsx)(d.SelectItem,{value:e.id.toString(),children:e.title},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"start_date",children:"Start Date"}),(0,s.jsx)(l.Input,{id:"start_date",type:"date",value:ec.start_date||"",onChange:e=>ed({...ec,start_date:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"renewal_date",children:"Renewal Date"}),(0,s.jsx)(l.Input,{id:"renewal_date",type:"date",value:ec.renewal_date||"",onChange:e=>ed({...ec,renewal_date:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"subscription_type",children:"Subscription Type"}),(0,s.jsxs)(d.Select,{value:ec.subscription_type,onValueChange:e=>ed({...ec,subscription_type:e}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"Select type"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"monthly",children:"Monthly"}),(0,s.jsx)(d.SelectItem,{value:"annual",children:"Annual"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"amount",children:"Amount Paid (in paise)"}),(0,s.jsx)(l.Input,{id:"amount",type:"number",placeholder:"49900",value:ec.subscription_amount_paid||"",onChange:e=>ed({...ec,subscription_amount_paid:Number(e.target.value)})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"status",children:"Subscription Status"}),(0,s.jsxs)(d.Select,{value:ec.subscription_status,onValueChange:e=>ed({...ec,subscription_status:e}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"Select status"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"active",children:"Active"}),(0,s.jsx)(d.SelectItem,{value:"inactive",children:"Inactive"}),(0,s.jsx)(d.SelectItem,{value:"past_due",children:"Past Due"}),(0,s.jsx)(d.SelectItem,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"tx_status",children:"Transaction Status"}),(0,s.jsxs)(d.Select,{value:ec.transaction_status,onValueChange:e=>ed({...ec,transaction_status:e}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"Select status"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"success",children:"Success"}),(0,s.jsx)(d.SelectItem,{value:"failed",children:"Failed"}),(0,s.jsx)(d.SelectItem,{value:"pending",children:"Pending"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"order_id",children:"Order ID"}),(0,s.jsx)(l.Input,{id:"order_id",placeholder:"ORD-001",value:ec.order_id||"",onChange:e=>ed({...ec,order_id:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"merchant_id",children:"Merchant ID"}),(0,s.jsx)(l.Input,{id:"merchant_id",placeholder:"MID-001",value:ec.merchant_id||"",onChange:e=>ed({...ec,merchant_id:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"tx_timestamp",children:"Transaction Timestamp"}),(0,s.jsx)(l.Input,{id:"tx_timestamp",type:"datetime-local",value:ec.transaction_timestamp||"",onChange:e=>ed({...ec,transaction_timestamp:e.target.value})})]})]}),(0,s.jsxs)(r.DialogFooter,{children:[(0,s.jsx)(a.Button,{variant:"outline",onClick:()=>ea(!1),children:"Cancel"}),(0,s.jsx)(a.Button,{onClick:ep,disabled:eo,className:"bg-[#0066ff] hover:bg-[#0052cc]",children:eo?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):"Create Subscription"})]})]})}),(0,s.jsx)(r.Dialog,{open:ee,onOpenChange:es,children:(0,s.jsxs)(r.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(r.DialogHeader,{children:(0,s.jsx)(r.DialogTitle,{children:"Edit Subscription"})}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_user",children:"User *"}),(0,s.jsxs)(d.Select,{value:ec.user_id?.toString(),onValueChange:e=>ed({...ec,user_id:Number(e)}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"Select user"})}),(0,s.jsx)(d.SelectContent,{children:L.map(e=>(0,s.jsxs)(d.SelectItem,{value:e.id.toString(),children:[e.name," (",e.email,")"]},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_plan",children:"Plan *"}),(0,s.jsxs)(d.Select,{value:ec.plan_id?.toString(),onValueChange:e=>ed({...ec,plan_id:Number(e)}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"Select plan"})}),(0,s.jsx)(d.SelectContent,{children:F.map(e=>(0,s.jsx)(d.SelectItem,{value:e.id.toString(),children:e.title},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_start_date",children:"Start Date"}),(0,s.jsx)(l.Input,{id:"edit_start_date",type:"date",value:ec.start_date||"",onChange:e=>ed({...ec,start_date:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_renewal_date",children:"Renewal Date"}),(0,s.jsx)(l.Input,{id:"edit_renewal_date",type:"date",value:ec.renewal_date||"",onChange:e=>ed({...ec,renewal_date:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_subscription_type",children:"Subscription Type"}),(0,s.jsxs)(d.Select,{value:ec.subscription_type,onValueChange:e=>ed({...ec,subscription_type:e}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"Select type"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"monthly",children:"Monthly"}),(0,s.jsx)(d.SelectItem,{value:"annual",children:"Annual"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_amount",children:"Amount Paid (in paise)"}),(0,s.jsx)(l.Input,{id:"edit_amount",type:"number",placeholder:"49900",value:ec.subscription_amount_paid||"",onChange:e=>ed({...ec,subscription_amount_paid:Number(e.target.value)})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_status",children:"Subscription Status"}),(0,s.jsxs)(d.Select,{value:ec.subscription_status,onValueChange:e=>ed({...ec,subscription_status:e}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"Select status"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"active",children:"Active"}),(0,s.jsx)(d.SelectItem,{value:"inactive",children:"Inactive"}),(0,s.jsx)(d.SelectItem,{value:"past_due",children:"Past Due"}),(0,s.jsx)(d.SelectItem,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_tx_status",children:"Transaction Status"}),(0,s.jsxs)(d.Select,{value:ec.transaction_status,onValueChange:e=>ed({...ec,transaction_status:e}),children:[(0,s.jsx)(d.SelectTrigger,{children:(0,s.jsx)(d.SelectValue,{placeholder:"Select status"})}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"success",children:"Success"}),(0,s.jsx)(d.SelectItem,{value:"failed",children:"Failed"}),(0,s.jsx)(d.SelectItem,{value:"pending",children:"Pending"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_order_id",children:"Order ID"}),(0,s.jsx)(l.Input,{id:"edit_order_id",placeholder:"ORD-001",value:ec.order_id||"",onChange:e=>ed({...ec,order_id:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_merchant_id",children:"Merchant ID"}),(0,s.jsx)(l.Input,{id:"edit_merchant_id",placeholder:"MID-001",value:ec.merchant_id||"",onChange:e=>ed({...ec,merchant_id:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.Label,{htmlFor:"edit_tx_timestamp",children:"Transaction Timestamp"}),(0,s.jsx)(l.Input,{id:"edit_tx_timestamp",type:"datetime-local",value:ec.transaction_timestamp||"",onChange:e=>ed({...ec,transaction_timestamp:e.target.value})})]})]}),(0,s.jsxs)(r.DialogFooter,{children:[(0,s.jsx)(a.Button,{variant:"outline",onClick:()=>es(!1),children:"Cancel"}),(0,s.jsx)(a.Button,{onClick:eg,disabled:eo,className:"bg-[#0066ff] hover:bg-[#0052cc]",children:eo?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Subscription"})]})]})}),(0,s.jsx)(r.Dialog,{open:Y,onOpenChange:Z,children:(0,s.jsxs)(r.DialogContent,{className:"max-w-2xl",children:[(0,s.jsx)(r.DialogHeader,{children:(0,s.jsx)(r.DialogTitle,{children:"Subscription Details"})}),en&&(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Subscription ID"}),(0,s.jsxs)("p",{className:"font-medium",children:["#",en.id]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Status"}),(0,s.jsx)("div",{className:"mt-1",children:ey(en.subscription_status)})]})]}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsx)(c.Label,{className:"text-gray-600 text-lg font-semibold mb-3 block",children:"User Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Full Name"}),(0,s.jsx)("p",{className:"font-medium",children:en.user?.full_name||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Email"}),(0,s.jsx)("p",{className:"font-medium",children:en.user?.email||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Contact"}),(0,s.jsx)("p",{className:"font-medium",children:en.user?.contact||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Location"}),(0,s.jsxs)("p",{className:"font-medium",children:[en.user?.state,", ",en.user?.country]})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsx)(c.Label,{className:"text-gray-600 text-lg font-semibold mb-3 block",children:"Plan Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Plan Name"}),(0,s.jsx)("p",{className:"font-medium",children:en.plan?.title||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Description"}),(0,s.jsx)("p",{className:"font-medium",children:en.plan?.description||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Subscription Type"}),(0,s.jsx)(i.Badge,{className:"bg-blue-100 text-blue-700",children:en.subscription_type})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Amount Paid"}),(0,s.jsx)("p",{className:"font-medium text-lg",children:eN(en.subscription_amount_paid)})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsx)(c.Label,{className:"text-gray-600 text-lg font-semibold mb-3 block",children:"Payment Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Order ID"}),(0,s.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded block mt-1",children:en.order_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Merchant ID"}),(0,s.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded block mt-1",children:en.merchant_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Transaction Status"}),(0,s.jsx)("div",{className:"mt-1",children:eC(en.transaction_status)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Transaction Time"}),(0,s.jsx)("p",{className:"font-medium",children:eS(en.transaction_timestamp)})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsx)(c.Label,{className:"text-gray-600 text-lg font-semibold mb-3 block",children:"Subscription Dates"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Start Date"}),(0,s.jsx)("p",{className:"font-medium",children:eS(en.start_date)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Renewal Date"}),(0,s.jsx)("p",{className:"font-medium",children:eS(en.renewal_date)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Created At"}),(0,s.jsx)("p",{className:"font-medium",children:eS(en.created_at)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.Label,{className:"text-gray-600",children:"Updated At"}),(0,s.jsx)("p",{className:"font-medium",children:eS(en.updated_at)})]})]})]})]}),(0,s.jsx)(r.DialogFooter,{children:(0,s.jsx)(a.Button,{variant:"outline",onClick:()=>Z(!1),children:"Close"})})]})}),(0,s.jsx)(h.AlertDialog,{open:el,onOpenChange:ei,children:(0,s.jsxs)(h.AlertDialogContent,{children:[(0,s.jsxs)(h.AlertDialogHeader,{children:[(0,s.jsx)(h.AlertDialogTitle,{children:"Delete Subscription"}),(0,s.jsx)(h.AlertDialogDescription,{children:"Are you sure you want to delete this subscription? This action cannot be undone."})]}),(0,s.jsxs)(h.AlertDialogFooter,{children:[(0,s.jsx)(h.AlertDialogCancel,{children:"Cancel"}),(0,s.jsx)(h.AlertDialogAction,{onClick:ej,disabled:eo,className:"bg-red-600 hover:bg-red-700",children:eo?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})})}e.s(["default",()=>D],23619)}]);