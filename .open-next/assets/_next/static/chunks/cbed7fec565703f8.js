(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,290768,e=>{"use strict";let a=(0,e.i(510965).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],290768)},468793,e=>{"use strict";let a=(0,e.i(510965).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],468793)},283272,e=>{"use strict";let a=(0,e.i(510965).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>a],283272)},662245,e=>{"use strict";let a=(0,e.i(510965).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>a],662245)},584244,e=>{"use strict";let a=(0,e.i(510965).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>a],584244)},893290,e=>{"use strict";let a=(0,e.i(510965).default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>a],893290)},238638,e=>{"use strict";let a=(0,e.i(510965).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>a],238638)},341507,e=>{"use strict";var a=e.i(794313),t=e.i(368340),s=e.i(63270),r=e.i(167881),l=e.i(23750),i=e.i(10708),c=e.i(62870),d=e.i(238638),n=e.i(468793),o=e.i(893290),m=e.i(584244),u=e.i(662245),h=e.i(290768),x=e.i(283272),p=e.i(161534),f=e.i(44215);let g=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Delhi","Jammu and Kashmir","Ladakh","Puducherry","Chandigarh","Andaman and Nicobar Islands","Dadra and Nagar Haveli and Daman and Diu","Lakshadweep"];function y(){var e;let{user:y,isLoading:b}=(0,p.useUserAuth)(),[j,N]=(0,t.useState)("profile"),[w,v]=(0,t.useState)(!1),[P,k]=(0,t.useState)(!1),[C,_]=(0,t.useState)(!1),[S,F]=(0,t.useState)(!1),[L,U]=(0,t.useState)(!0),[M,A]=(0,t.useState)(!1),[E,I]=(0,t.useState)(!1),[$,B]=(0,t.useState)(null),T=(0,t.useRef)(null),[O,z]=(0,t.useState)({full_name:"",email:"",contact:"",country:"India",state:"",profile_pic_url:""}),[D,G]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,t.useEffect)(()=>{let e=async()=>{if(y?.id)try{U(!0);let e=await f.apiClient.get(`/users/${y.id}/settings`);if(e.success&&e.data?.settings){let a=e.data.settings;z({full_name:a.profile.full_name||"",email:a.account.email||"",contact:a.profile.contact||"",country:a.profile.country||"India",state:a.profile.state||"",profile_pic_url:a.profile.profile_pic_url||""})}}catch(e){console.error("Failed to fetch settings:",e),B({type:"error",text:"Failed to load settings"})}finally{U(!1)}};!b&&y&&e()},[y,b]);let R=async e=>{let a=e.target.files?.[0];if(a){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(a.type))return void B({type:"error",text:"Please upload a valid image file (JPEG, PNG, GIF, or WebP)"});if(a.size>5242880)return void B({type:"error",text:"File size must be less than 5MB"});try{I(!0),B(null);let e=Date.now(),t=a.name.replace(/[^a-zA-Z0-9.-]/g,"_"),s=`user-profiles/user-${e}-${t}`,r=a.type||"image/jpeg",l=`https://srv.digitalmadrasa.co.in/api/v1/static/objects?path=${encodeURIComponent(s)}&contentType=${encodeURIComponent(r)}`,i=await fetch(l,{method:"POST",body:a});if(!i.ok){let e=await i.json();throw Error(e.error||"Upload failed")}let c=`https://cdn.digitalmadrasa.co.in/${s}`;z({...O,profile_pic_url:c}),B({type:"success",text:"Profile picture uploaded successfully"})}catch(e){console.error("Upload error:",e),B({type:"error",text:"Failed to upload image"})}finally{I(!1)}}},H=async e=>{if(e.preventDefault(),y?.id)try{A(!0),B(null);let e=await f.apiClient.put(`/users/${y.id}/settings/profile`,{full_name:O.full_name,contact:O.contact,country:O.country,state:O.state,profile_pic_url:O.profile_pic_url});e.success?B({type:"success",text:"Profile updated successfully"}):B({type:"error",text:e.error||"Failed to update profile"})}catch(e){console.error("Failed to update profile:",e),B({type:"error",text:"Failed to update profile"})}finally{A(!1)}},K=async e=>{if(e.preventDefault(),y?.id){if(D.newPassword!==D.confirmPassword)return void B({type:"error",text:"New passwords don't match!"});if(D.newPassword&&D.newPassword.length<8)return void B({type:"error",text:"Password must be at least 8 characters"});try{A(!0),B(null);let e={};if(D.newPassword&&(e.password=D.newPassword),0===Object.keys(e).length){B({type:"error",text:"No changes to save"}),A(!1);return}let a=await f.apiClient.put(`/users/${y.id}/settings/account`,e);a.success?(B({type:"success",text:"Account settings updated successfully"}),G({currentPassword:"",newPassword:"",confirmPassword:""})):B({type:"error",text:a.error||"Failed to update account settings"})}catch(e){console.error("Failed to update account:",e),B({type:"error",text:"Failed to update account settings"})}finally{A(!1)}}};return b||L?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsx)(h.Loader2,{className:"w-8 h-8 animate-spin text-[#0066ff]"})}):(0,a.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl font-heading font-bold text-[#150101] mb-2",children:"Settings"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your profile and account preferences"})]}),$&&(0,a.jsx)("div",{className:`mb-6 p-4 rounded-xl ${"success"===$.type?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:$.text}),(0,a.jsxs)("div",{className:"flex gap-2 mb-8 p-1 bg-gray-100 rounded-full w-fit",children:[(0,a.jsxs)("button",{onClick:()=>N("profile"),className:`flex items-center gap-2 px-6 py-2.5 rounded-full font-semibold text-sm transition-all ${"profile"===j?"bg-white text-[#0066ff] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[(0,a.jsx)(m.User,{className:"w-4 h-4"}),"Profile"]}),(0,a.jsxs)("button",{onClick:()=>N("account"),className:`flex items-center gap-2 px-6 py-2.5 rounded-full font-semibold text-sm transition-all ${"account"===j?"bg-white text-[#0066ff] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[(0,a.jsx)(u.Lock,{className:"w-4 h-4"}),"Account"]})]}),"profile"===j&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-3xl p-6 sm:p-8 border border-gray-100 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-heading font-bold text-[#150101] mb-6",children:"Profile Photo"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(s.Avatar,{className:"w-24 h-24 border-4 border-gray-50",children:[O.profile_pic_url?(0,a.jsx)(s.AvatarImage,{src:O.profile_pic_url||"/placeholder.svg"}):null,(0,a.jsx)(s.AvatarFallback,{className:"bg-gradient-to-br from-[#0066ff] to-[#0052cc] text-white text-2xl font-bold",children:(e=O.full_name)?e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U"})]}),(0,a.jsx)("button",{onClick:()=>T.current?.click(),disabled:E,className:"absolute -bottom-1 -right-1 w-9 h-9 bg-[#0066ff] rounded-full flex items-center justify-center text-white hover:bg-[#0052cc] transition-colors shadow-lg disabled:opacity-50",children:E?(0,a.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(d.Camera,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex-1 text-center sm:text-left",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a clear photo. JPG, PNG (Max 5MB)"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 justify-center sm:justify-start",children:[(0,a.jsx)("input",{ref:T,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:R,className:"hidden"}),(0,a.jsx)(r.Button,{onClick:()=>T.current?.click(),disabled:E,className:"bg-[#0066ff] hover:bg-[#0052cc] rounded-xl",children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Upload,{className:"w-4 h-4 mr-2"}),"Change Photo"]})}),O.profile_pic_url&&(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>z({...O,profile_pic_url:""}),className:"text-red-600 border-red-200 hover:bg-red-50 rounded-xl bg-transparent",children:"Remove"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-3xl p-6 sm:p-8 border border-gray-100 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-heading font-bold text-[#150101] mb-6",children:"Personal Information"}),(0,a.jsxs)("form",{onSubmit:H,className:"space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"fullName",className:"text-sm font-semibold text-gray-700",children:"Full Name"}),(0,a.jsx)(l.Input,{id:"fullName",type:"text",value:O.full_name,onChange:e=>z({...O,full_name:e.target.value}),className:"h-12 rounded-xl border-gray-200"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"email",className:"text-sm font-semibold text-gray-700",children:"Email Address"}),(0,a.jsx)(l.Input,{id:"email",type:"email",value:O.email,disabled:!0,className:"h-12 rounded-xl bg-gray-50 border-gray-200 cursor-not-allowed"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Email can be changed in Account settings"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"contactNumber",className:"text-sm font-semibold text-gray-700",children:"Contact Number"}),(0,a.jsx)(l.Input,{id:"contactNumber",type:"tel",value:O.contact,onChange:e=>z({...O,contact:e.target.value}),className:"h-12 rounded-xl border-gray-200",placeholder:"+91 9876543210"})]}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"country",className:"text-sm font-semibold text-gray-700",children:"Country"}),(0,a.jsx)(l.Input,{id:"country",type:"text",value:O.country,disabled:!0,className:"h-12 rounded-xl bg-gray-50 border-gray-200"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"state",className:"text-sm font-semibold text-gray-700",children:"State"}),(0,a.jsxs)(c.Select,{value:O.state,onValueChange:e=>z({...O,state:e}),children:[(0,a.jsx)(c.SelectTrigger,{className:"h-12 rounded-xl border-gray-200",children:(0,a.jsx)(c.SelectValue,{placeholder:"Select State"})}),(0,a.jsx)(c.SelectContent,{children:g.map(e=>(0,a.jsx)(c.SelectItem,{value:e,children:e},e))})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsx)(r.Button,{type:"submit",disabled:M,className:"bg-[#0066ff] hover:bg-[#0052cc] px-8 rounded-xl",children:M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})})]})]})]}),"account"===j&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-3xl p-6 sm:p-8 border border-gray-100 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-heading font-bold text-[#150101] mb-6",children:"Email Address"}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"email",className:"text-sm font-semibold text-gray-700",children:"Current Email"}),(0,a.jsx)(l.Input,{id:"email",type:"email",value:O.email,disabled:!0,className:"h-12 rounded-xl border-gray-200 bg-gray-50 cursor-not-allowed"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Email cannot be changed. Contact support if you need to update your email."})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-3xl p-6 sm:p-8 border border-gray-100 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-xl font-heading font-bold text-[#150101] mb-6",children:"Change Password"}),(0,a.jsxs)("form",{onSubmit:K,className:"space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"newPassword",className:"text-sm font-semibold text-gray-700",children:"New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Input,{id:"newPassword",type:P?"text":"password",value:D.newPassword,onChange:e=>G({...D,newPassword:e.target.value}),className:"h-12 rounded-xl border-gray-200 pr-12",placeholder:"Enter new password"}),(0,a.jsx)("button",{type:"button",onClick:()=>k(!P),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:P?(0,a.jsx)(o.EyeOff,{className:"w-5 h-5"}):(0,a.jsx)(n.Eye,{className:"w-5 h-5"})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Minimum 8 characters"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"confirmPassword",className:"text-sm font-semibold text-gray-700",children:"Confirm New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Input,{id:"confirmPassword",type:C?"text":"password",value:D.confirmPassword,onChange:e=>G({...D,confirmPassword:e.target.value}),className:"h-12 rounded-xl border-gray-200 pr-12",placeholder:"Confirm new password"}),(0,a.jsx)("button",{type:"button",onClick:()=>_(!C),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:C?(0,a.jsx)(o.EyeOff,{className:"w-5 h-5"}):(0,a.jsx)(n.Eye,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsx)(r.Button,{type:"submit",disabled:M,className:"bg-[#0066ff] hover:bg-[#0052cc] px-8 rounded-xl",children:M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Account"})})]})]})]})]})})}e.s(["default",()=>y])}]);