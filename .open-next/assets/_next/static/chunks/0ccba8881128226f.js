(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,184762,e=>{"use strict";var t=e.i(794313),s=e.i(647163);function i({className:e,...i}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...i})}e.s(["Textarea",()=>i])},290768,e=>{"use strict";let t=(0,e.i(510965).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],290768)},120682,e=>{"use strict";var t=e.i(368340);let s=0,i=new Map,a=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},r=[],l={toasts:[]};function o(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?a(s):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),r.forEach(e=>{e(l)})}function n({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||i()}}}),{id:t,dismiss:i,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function d(){let[e,s]=t.useState(l);return t.useEffect(()=>(r.push(s),()=>{let e=r.indexOf(s);e>-1&&r.splice(e,1)}),[e]),{...e,toast:n,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}e.s(["toast",()=>n,"useToast",()=>d])},23750,e=>{"use strict";var t=e.i(794313),s=e.i(647163);function i({className:e,type:i,...a}){return(0,t.jsx)("input",{type:i,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}e.s(["Input",()=>i])},10708,e=>{"use strict";var t=e.i(794313),s=e.i(368340),i=e.i(620673),a=s.forwardRef((e,s)=>(0,t.jsx)(i.Primitive.label,{...e,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var r=e.i(647163);function l({className:e,...s}){return(0,t.jsx)(a,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}e.s(["Label",()=>l],10708)},352910,e=>{"use strict";let t=(0,e.i(510965).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],352910)},177511,e=>{"use strict";var t=e.i(794313),s=e.i(801244),i=e.i(368340),a=e.i(167881),r=e.i(23750),l=e.i(10708),o=e.i(184762),n=e.i(352910),d=e.i(283272),c=e.i(290768),u=e.i(53462),m=e.i(44215),p=e.i(120682),h=e.i(538036);function b(){let e=(0,s.useRouter)(),{toast:b}=(0,p.useToast)(),[x,g]=(0,i.useState)(!1),[f,v]=(0,i.useState)([]),[_,j]=(0,i.useState)([]),[N,y]=(0,i.useState)([]),[w,C]=(0,i.useState)(!1),[T,S]=(0,i.useState)(0),k=(0,i.useRef)(null),[L,E]=(0,i.useState)({title:"",slug:"",subtitle:"",short_description:"",description:"",thumbnail_url:"",preview_video_url:"",is_published:!1,mentor_id:"",certificate_template_id:"",plan_id:"",estimated_duration_seconds:""});(0,i.useEffect)(()=>{(async()=>{try{let e=(0,h.getAdminToken)(),[t,s,i]=await Promise.all([m.apiClient.get("/mentors",e),m.apiClient.get("/subscription-plans",e),m.apiClient.get("/certificate-templates",e)]);t.success&&t.data&&v(t.data.items||[]),s.success&&s.data&&j(s.data.items||[]),i.success&&i.data&&y(i.data.items||[])}catch(e){console.error("Error fetching form data:",e)}})()},[]);let I=async e=>{C(!0),S(0);try{let t=`course-${Date.now()}-${e.name.replace(/\s+/g,"-")}`,s=`course-res/${t}`,i=e.type||"image/jpeg",a=new XMLHttpRequest;a.upload.onprogress=e=>{if(e.lengthComputable){let t=Math.round(e.loaded/e.total*100);S(t)}};let r=new Promise(t=>{a.onload=()=>{a.status>=200&&a.status<300?t(!0):t(!1)},a.onerror=()=>t(!1),a.onabort=()=>t(!1);let r=`https://srv.digitalmadrasa.co.in/api/v1/static/objects?path=${encodeURIComponent(s)}&contentType=${encodeURIComponent(i)}`;a.open("POST",r),a.send(e)});if(await r){let e=`https://cdn.digitalmadrasa.co.in/${s}`;E({...L,thumbnail_url:e}),b({title:"Success",description:"Thumbnail uploaded successfully"})}else throw Error("Upload failed")}catch(e){console.error("Error uploading image:",e),b({title:"Error",description:"Failed to upload image. Please try again.",variant:"destructive"})}finally{C(!1),S(0)}},A=e=>{let{name:t,value:s,type:i}=e.target,a={...L};"checkbox"===i?a[t]=e.target.checked:a[t]=s,"title"===t&&(a.slug=s.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")),E(a)},F=async()=>{if(!L.title.trim())return void b({title:"Validation Error",description:"Please enter a course title",variant:"destructive"});if(!L.slug.trim())return void b({title:"Validation Error",description:"Please enter a course slug",variant:"destructive"});g(!0);try{let t=(0,h.getAdminToken)(),s={title:L.title,slug:L.slug,subtitle:L.subtitle||void 0,short_description:L.short_description||void 0,description:L.description||void 0,thumbnail_url:L.thumbnail_url||void 0,preview_video_url:L.preview_video_url||void 0,is_published:L.is_published,mentor_id:L.mentor_id?Number(L.mentor_id):void 0,certificate_template_id:L.certificate_template_id?Number(L.certificate_template_id):void 0,plan_id:L.plan_id?Number(L.plan_id):void 0,estimated_duration_seconds:L.estimated_duration_seconds?Number(L.estimated_duration_seconds):void 0},i=await m.apiClient.post("/courses",s,t);i.success&&i.data?(b({title:"Success",description:"Course created successfully"}),e.push("/admin/courses")):b({title:"Error",description:i.message||"Failed to create course",variant:"destructive"})}catch(e){console.error("Error creating course:",e),b({title:"Error",description:"Failed to create course",variant:"destructive"})}finally{g(!1)}},D=L.title.trim()&&L.slug.trim();return(0,t.jsx)("div",{className:"min-h-screen bg-[#fafafa] p-4 sm:p-6 lg:p-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(u.default,{href:"/admin/courses",children:(0,t.jsxs)(a.Button,{variant:"ghost",size:"sm",children:[(0,t.jsx)(n.ChevronLeft,{className:"w-4 h-4 mr-2"}),"Back to Courses"]})})}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-600 via-blue-500 to-indigo-600 rounded-2xl sm:rounded-3xl p-6 sm:p-8 mb-6 sm:mb-8 text-white shadow-lg",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-heading font-bold mb-2",children:"Create New Course"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-white/90",children:"Set up your course details and start building your curriculum"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 sm:p-8 shadow-sm space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-5 pb-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-heading font-bold text-gray-900",children:"Basic Information"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.Label,{htmlFor:"title",className:"text-sm font-semibold mb-2 block",children:["Course Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(r.Input,{id:"title",name:"title",value:L.title,onChange:A,placeholder:"e.g., Advanced React Patterns",className:"h-11"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.Label,{htmlFor:"slug",className:"text-sm font-semibold mb-2 block",children:["Slug ",(0,t.jsx)("span",{className:"text-gray-500 text-xs",children:"(auto-generated)"})]}),(0,t.jsx)(r.Input,{id:"slug",name:"slug",value:L.slug,readOnly:!0,className:"h-11 bg-gray-50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"subtitle",className:"text-sm font-semibold mb-2 block",children:"Course Subtitle"}),(0,t.jsx)(r.Input,{id:"subtitle",name:"subtitle",value:L.subtitle,onChange:A,placeholder:"e.g., Master advanced React concepts and best practices",className:"h-11"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"short_description",className:"text-sm font-semibold mb-2 block",children:"Short Description"}),(0,t.jsx)(o.Textarea,{id:"short_description",name:"short_description",value:L.short_description,onChange:A,placeholder:"Brief description for course listings (max 160 characters)",rows:2,className:"resize-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"description",className:"text-sm font-semibold mb-2 block",children:"Full Description"}),(0,t.jsx)(o.Textarea,{id:"description",name:"description",value:L.description,onChange:A,placeholder:"Detailed course description (supports markdown)",rows:4,className:"resize-none"})]})]}),(0,t.jsxs)("div",{className:"space-y-5 pb-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-heading font-bold text-gray-900",children:"Media & Content"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"thumbnail_url",className:"text-sm font-semibold mb-2 block",children:"Thumbnail"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Input,{id:"thumbnail_url",name:"thumbnail_url",value:L.thumbnail_url,onChange:A,placeholder:"https://example.com/thumbnail.jpg",className:"h-11 flex-1"}),(0,t.jsx)("input",{type:"file",ref:k,accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files?.[0];t&&I(t)}}),(0,t.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>k.current?.click(),disabled:w,className:"h-11",children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),T,"%"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Upload,{className:"w-4 h-4 mr-2"}),"Upload"]})})]}),L.thumbnail_url&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)("img",{src:L.thumbnail_url||"/placeholder.svg",alt:"Thumbnail preview",className:"w-40 h-24 object-cover rounded-lg border border-gray-200"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"preview_video_url",className:"text-sm font-semibold mb-2 block",children:"Preview Video URL"}),(0,t.jsx)(r.Input,{id:"preview_video_url",name:"preview_video_url",value:L.preview_video_url,onChange:A,placeholder:"https://example.com/preview.mp4",className:"h-11"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"YouTube or Vimeo URL"})]})]}),(0,t.jsxs)("div",{className:"space-y-5 pb-6 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-heading font-bold text-gray-900",children:"Course Configuration"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"mentor_id",className:"text-sm font-semibold mb-2 block",children:"Course Mentor"}),(0,t.jsxs)("select",{id:"mentor_id",name:"mentor_id",value:L.mentor_id,onChange:A,className:"w-full h-11 px-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Select mentor..."}),f.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"certificate_template_id",className:"text-sm font-semibold mb-2 block",children:"Certificate Template"}),(0,t.jsxs)("select",{id:"certificate_template_id",name:"certificate_template_id",value:L.certificate_template_id,onChange:A,className:"w-full h-11 px-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Select certificate template..."}),N.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"plan_id",className:"text-sm font-semibold mb-2 block",children:"Course Plan"}),(0,t.jsxs)("select",{id:"plan_id",name:"plan_id",value:L.plan_id,onChange:A,className:"w-full h-11 px-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Select plan..."}),_.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"estimated_duration_seconds",className:"text-sm font-semibold mb-2 block",children:"Duration (seconds)"}),(0,t.jsx)(r.Input,{id:"estimated_duration_seconds",name:"estimated_duration_seconds",type:"number",value:L.estimated_duration_seconds,onChange:A,placeholder:"e.g., 3600 (1 hour)",className:"h-11",min:"0"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"is_published",name:"is_published",checked:L.is_published,onChange:A,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,t.jsx)(l.Label,{htmlFor:"is_published",className:"text-sm font-semibold cursor-pointer",children:"Publish course immediately"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(a.Button,{onClick:F,className:"flex-1",size:"lg",disabled:!D||x,children:x?"Creating...":"Create Course"}),(0,t.jsx)(u.default,{href:"/admin/courses",className:"flex-1",children:(0,t.jsx)(a.Button,{variant:"outline",className:"w-full bg-transparent",size:"lg",children:"Cancel"})})]})]})]})})}e.s(["default",()=>b])}]);